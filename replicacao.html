<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Replica√ß√£o de Dados - SupraMAIS</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<script src="js/auth.js"></script>
<script>requireAuth();</script>

<div class="app">

  <aside class="sidebar">
    <div class="brand">
      <img src="img/logo.png" alt="SupraMAIS">
      <div class="title">
        <strong>Base do Suporte</strong>
        <span>Procedimentos e checklists</span>
      </div>
    </div>

    <div class="nav">
      <a href="home.html">üè† Home</a>

      <div class="nav-group">
        <h3>Banco de Dados</h3>
        <a href="script-versao.html">üìÑ Script de Vers√£o</a>
        <a href="profile-sql.html">üß™ SQL Server Profile</a>
      </div>

      <div class="nav-group">
        <h3>Configura√ß√£o de Par√¢metros</h3>
        <a class="active" href="replicacao.html">üîÅ Replica√ß√£o de Dados</a>
      </div>
    </div>
  </aside>

  <section class="content">
    <div class="topbar">
      <h1>üîÅ Replica√ß√£o de Dados</h1>

      <div class="topbar-actions">
        <span class="badge">Configura√ß√£o de Par√¢metros</span>
        <button class="btn-logout" onclick="logout()">Sair</button>
      </div>
    </div>

    <div class="main">

      <div class="section">
        <h2>O que √©</h2>
        <p>
          Replica√ß√£o √© uma configura√ß√£o utilizada para clonar determinadas informa√ß√µes/tabelas entre bancos de dados
          (multi-banco), garantindo que cadastros e configura√ß√µes existam em mais de um banco do cliente.
        </p>
      </div>

      <div class="section">
        <h2>Onde habilita</h2>
        <ul>
          <li><strong>Ferramentas</strong> &gt; <strong>Configura√ß√£o de Par√¢metros</strong> &gt; aba <strong>Sistema</strong> (habilita com senha m√°ster)</li>
          <li>Depois: <strong>Ferramentas</strong> &gt; <strong>Configura√ß√£o de Par√¢metros</strong> &gt; aba <strong>Integra√ß√µes</strong> &gt; <strong>Replica√ß√£o</strong></li>
        </ul>
      </div>

      <div class="section">
        <h2>Como funciona (conceitos)</h2>
        <ul>
          <li><strong>Bancos de dados:</strong> bancos que replicam dados entre si (sigla aparece em relat√≥rios multi-banco).</li>
          <li><strong>Tabelas Principais:</strong> cadastros principais (ex.: Produto, Cliente/Fornecedor, Tipos, etc.).</li>
          <li><strong>Tabelas Agregadas:</strong> tabelas auxiliares sem janela pr√≥pria (ex.: Contato, Endere√ßo, convers√µes etc.).</li>
          <li><strong>Campos Exce√ß√£o:</strong> campos que n√£o devem replicar (por regra do sistema ou necessidade do cliente).</li>
        </ul>

        <div class="callout warn">
          ‚ö†Ô∏è Nem sempre ‚Äúcolocar como exce√ß√£o‚Äù resolve erro de replica√ß√£o. Cada caso deve ser avaliado.
        </div>
      </div>

      <div class="section">
        <h2>Checklist r√°pido (quando d√° erro de replica√ß√£o)</h2>
        <ul class="checklist">
          <li>‚òê Capturar a mensagem completa do erro (banco, tabela e campo)</li>
          <li>‚òê Confirmar se todos os bancos envolvidos foram atualizados</li>
          <li>‚òê Verificar se o campo/tabela existe em TODOS os bancos</li>
          <li>‚òê Identificar se o erro √© falta de script, FK, ou cadastro faltando no destino</li>
        </ul>
      </div>

      <div class="section">
        <h2>Exemplo 1 ‚Äî Coluna inv√°lida</h2>
        <div class="callout danger">
          ‚ùå <strong>Erro:</strong> ‚ÄúNome de coluna 'catpro_codigo' inv√°lido. Banco: SGC Tabela: produto‚Äù
        </div>
        <p style="margin-top:10px;">
          Normalmente indica que o campo n√£o foi criado em algum banco que participa da replica√ß√£o (script n√£o executou ou banco n√£o atualizado).
        </p>
        <div class="callout ok">
          ‚úÖ <strong>A√ß√£o recomendada:</strong> garantir que todos os bancos est√£o atualizados e confirmar se o campo existe na tabela em todos eles.
        </div>
      </div>

      <div class="section">
        <h2>Exemplo 2 ‚Äî Conflito de Foreign Key</h2>
        <div class="callout danger">
          ‚ùå <strong>Erro:</strong> ‚ÄúINSERT conflitou com FOREIGN KEY... tabela PRINCIPIO_ATIVO...‚Äù
        </div>
        <p style="margin-top:10px;">
          Indica que o cadastro referenciado existe no banco de origem, mas n√£o existe no banco de destino.
        </p>
        <div class="callout ok">
          ‚úÖ <strong>A√ß√£o recomendada:</strong> verificar o cadastro vinculado e garantir que ele exista/replica corretamente no banco de destino.
        </div>
      </div>

      <div class="section">
        <h2>Observa√ß√µes importantes</h2>
        <ul>
          <li>Em muitos casos o problema √© banco ‚Äúesquecido‚Äù na replica√ß√£o (banco antigo ou n√£o atualizado)</li>
          <li>Antes de alterar exce√ß√µes, sempre entender a causa raiz</li>
          <li>Se envolver regra do cliente (n√£o replicar campo), documentar a decis√£o e motivo</li>
        </ul>
      </div>

    </div>
  </section>

</div>
</body>
</html>
