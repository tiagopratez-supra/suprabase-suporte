<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Suporte SupraMAIS - Script de Vers√£o</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<script src="js/auth.js"></script>
<script>requireAuth();</script>

<div class="app">

<aside class="sidebar">
    <div class="brand">
      <img src="img/logo.png" alt="SupraMAIS">
      <div class="title">
        <strong>Base do Suporte</strong>
        <span>Procedimentos e checklists</span>
      </div>
    </div>

    <div class="nav">
      <a class="" href="home.html">üè† Home</a>

      <div class="nav-group">
        <h3>Banco de Dados</h3>
        <a class="active" href="script-versao.html">üìÑ Script de Vers√£o</a>
        <a class="" href="profile-sql.html">üß™ SQL Server Profile</a>
      </div>

      <div class="nav-group">
        <h3>Configura√ß√£o de Par√¢metros</h3>
        <a class="" href="replicacao.html">üîÅ Replica√ß√£o de Dados</a>
        <a class="" href="configuracao-email.html">üìß Configura√ß√£o de E-mail</a>
        <a class="" href="backup-agente.html">üóÑÔ∏è Backup - Agente SupraMAIS</a>
      </div>
    </div>
  </aside>

  <section class="content">

    <div class="topbar">
      <h1>üìÑ Script de Vers√£o</h1>

      <div class="topbar-actions">
        <span class="badge">SupraMAIS</span>
        <button class="btn-logout" onclick="logout()">Sair</button>
      </div>
    </div>

    <div class="main">

      <div class="section">
        <h2>Conceito</h2>
        <ul>
          <li><strong>O que √©?</strong> S√£o os SQL que criam ou removem campos do banco de dados, normalmente numerados sequencialmente.</li>
          <li><strong>Quem cria?</strong> S√£o criados pelo Desenvolvimento.</li>
          <li><strong>Como s√£o executados?</strong> Atrav√©s da atualiza√ß√£o de vers√£o.</li>
          <li><strong>Onde ficam?</strong> Na pasta <code>SQL</code> dentro da pasta <code>SupraSGC</code>.</li>
          <li><strong>Como saber em qual script o banco do cliente est√°?</strong> Acessar o menu <em>Ajuda &gt; Sobre</em> no SupraMAIS.</li>
        </ul>

        <p><img src="img/doc/sobre-versao-bd.png" alt="Ajuda > Sobre mostrando Vers√£o BD"></p>
      </div>

      <div class="section">
        <h2>Como saber se n√£o rodou algum script de vers√£o no banco de dados</h2>

        <p>Normalmente √© exibido alguma mensagem de erro ao acessar o sistema ou o par√¢metro.</p>
        <p>Nem todos os scripts que n√£o rodaram d√£o erro ao acessar o sistema ou par√¢metro, pode ser em alguma outra tela especificamente.</p>

        <h3>Exemplos comuns de erro</h3>
        <ul>
          <li><strong>Script que n√£o rodou, mas pode n√£o afetar login/telas</strong><br>
            Ex.: Nome de objeto <code>'gera_p1_livros_fiscais'</code> inv√°lido. (erro ao gerar um relat√≥rio fiscal)</li>
          <li><strong>Erro ao acessar o sistema ou par√¢metro</strong><br>
            Ex.: Nome de objeto <code>'parametro_ecs_colopast'</code> inv√°lido.</li>
        </ul>

        <h3>Verifica√ß√£o pela pasta SupraSGC (arquivo TXT)</h3>
        <p>Para verificar se um script n√£o rodou, acessar a pasta <code>SupraSGC</code>. L√° ter√° um arquivo TXT conforme exemplo abaixo.</p>
        <p><img src="img/doc/atualizacao-log.png" alt="Arquivo de log de atualiza√ß√£o na pasta SupraSGC"></p>

        <p>Abrir o arquivo e verificar o script. Antes de rodar manualmente novamente o script, verificar se pode gerar algum efeito colateral. Na d√∫vida, pergunte.</p>

        <h3>Localizar um script/campo pelo SQL Server (Localizar nos Arquivos)</h3>
        <p>Ir no SQL em <em>Localizar e Substituir</em> &gt; <em>Localiza√ß√£o R√°pida</em> (Ctrl + F).</p>
        <p><img src="img/doc/ssms-menu-ctrlf.png" alt="Menu do SQL Server para Localiza√ß√£o R√°pida (Ctrl+F)"></p>

        <p>Na tela de pesquisa, em <strong>Localizar</strong> coloque o nome do campo que procura e, em <strong>Examinar</strong>, aponte para a pasta <code>SQL</code> da sua m√°quina. Depois clique em <strong>Localizar Tudo</strong>.</p>
        <p><img src="img/doc/ssms-localizar-nos-arquivos.png" alt="Janela Localizar nos Arquivos do SSMS"></p>

        <p>Ser√° exibido no resultado todos os scripts contendo este campo. N√£o necessariamente ser√° o maior n√∫mero ‚Äî ter√° que analisar o caso para entender qual utilizar. Para abrir o script, d√™ duplo clique sobre o mesmo.</p>
        <p><img src="img/doc/ssms-resultados-localizar.png" alt="Resultado da busca mostrando script de vers√£o"></p>

        <p>Neste exemplo, o script que criou o <code>parametro_ecs_coloplast</code> √© o de n√∫mero <strong>2966</strong>.</p>
      </div>
    </div>
  </section>

</div>
</body>
</html>
